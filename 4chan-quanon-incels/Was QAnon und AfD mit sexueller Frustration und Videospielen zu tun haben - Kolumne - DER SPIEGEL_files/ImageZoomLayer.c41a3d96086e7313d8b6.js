(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{323:function(t,n,i){"use strict";i.r(n),i.d(n,"default",(function(){return w}));i(20),i(2),i(43),i(232),i(48),i(5),i(17),i(18),i(19),i(7),i(28),i(26),i(11),i(12),i(8),i(9),i(10),i(3),i(4),i(6);var e=i(16),o=i(0),a=i(23),s=i(72);i(44),i(69),i(42),i(123);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,(o=e.key,a=void 0,a=function(t,n){if("object"!==r(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var e=i.call(t,n||"default");if("object"!==r(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(o,"string"),"symbol"===r(a)?a:String(a)),e)}var o,a}var c=function(){function t(n,i){var e=this;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),n&&n instanceof Element?(this.pinchCanvas=n,this.pinchTarget=i||this.pinchCanvas,this.scaleMin=1,this.scaleMax=2.3,this.scaleThreshold=1.65,this.transformProperty=Array.prototype.slice.call(getComputedStyle(this.pinchCanvas)).filter((function(t){return t.match(/^(-webkit-|-moz-|-ms-|-o-)?transform$/)})).pop(),this.isInitalized=!1,this.isAttached=!1,this.isZoomed=!1,this.isZoomOngoing=!1,this.isPinchOngoing=!1,this.transitionDuration=200,this.scalingFactor=1,this.pinchStartScalingFactor=null,this.isPanning=!1,this.translation={x:0,y:0},this.panStartPointerPosition={x:null,y:null},this.panStartTranslation={x:null,y:null},this.isNativeTouchOngoing=!1,this.nativeTouchStartPosition={x:null,y:null},this.boundOnPinch=function(t){return e.onPinch(t)},this.boundOnPinchStart=function(){return e.onPinchStart()},this.boundOnPinchEnd=function(){return e.onPinchEnd()},this.boundOnZoomedIn=function(){return e.onZoomedIn()},this.boundOnZoomedOut=function(){return e.onZoomedOut()},this.boundOnPanStart=function(t){return e.onPanStart(t)},this.boundOnPan=function(t){return e.onPan(t)},this.boundOnPanEnd=function(){return e.onPanEnd()},this.boundOnTouchStart=function(t){return e.onTouchStart(t)},this.boundOnTouchEnd=function(t){return e.onTouchEnd(t)}):console.warn("PinchToZoom: invalid required argument `canvasElement`, must be of type `Element`")}var n,e,s;return n=t,(e=[{key:"init",value:function(){var t=this;return a.a.isPhone?new Promise((function(n,e){i.e(6).then(i.t.bind(null,322,7)).then((function(i){t.Hammer=i.default,t.isInitalized=!0,n()})).catch(e)})):Promise.reject()}},{key:"attach",value:function(){this.isInitalized&&!this.isAttached&&(this.zoomOut(),this.attachPinch(),this.isAttached=!0)}},{key:"detach",value:function(){this.isInitalized&&this.isAttached&&(this.zoomOut(),this.detachPinch(),this.isAttached=!1)}},{key:"onTouchStart",value:function(t){this.isNativeTouchOngoing=!0;var n=t.changedTouches[0];this.nativeTouchStartPosition.x=n.clientX,this.nativeTouchStartPosition.y=n.clientY}},{key:"onTouchEnd",value:function(t){var n=t.changedTouches[0];this.isNativeTouchOngoing&&n.clientX!==this.nativeTouchStartPosition.x&&n.clientY!==this.nativeTouchStartPosition.y&&(this.detachPan(),this.detachPinch(),this.attachPinch(),this.attachPan(),this.isNativeTouchOngoing=!1)}},{key:"onPinchStart",value:function(){this.isNativeTouchOngoing=!1,this.isPinchOngoing=!0,this.pinchStartScalingFactor=this.scalingFactor,this.updateZoom()}},{key:"onPinch",value:function(t){var n=t.scale,i=Math.floor(100*n)/100,e=this.pinchStartScalingFactor*i;e>=this.scaleMin&&e<=this.scaleMax&&(this.scalingFactor=e)}},{key:"onPinchEnd",value:function(){this.pinchStartScalingFactor=null,this.isPinchOngoing=!1,this.scalingFactor>=this.scaleThreshold?this.zoomIn():this.zoomOut()}},{key:"onPanStart",value:function(t){this.isNativeTouchOngoing=!1,this.resetPan(),this.isPanning=!0,this.panStartPointerPosition={x:t.center.x,y:t.center.y},this.panStartTranslation=this.translation}},{key:"onPan",value:function(t){if(this.isPanning){var n={x:(t.center.x-this.panStartPointerPosition.x)/this.scalingFactor,y:(t.center.y-this.panStartPointerPosition.y)/this.scalingFactor},i={x:this.translation.x-this.panStartTranslation.x,y:this.translation.y-this.panStartTranslation.y},e={x:n.x-i.x,y:n.y-i.y};(e.x||e.y)&&this.panBy(e)}}},{key:"onPanEnd",value:function(){this.resetPan()}},{key:"onZoomedIn",value:function(){this.resetTransition(),this.isZoomed=!0,this.attachPan(),this.isZoomOngoing=!1}},{key:"onZoomedOut",value:function(){this.resetTransition(),this.isZoomed=!1,this.isZoomOngoing=!1}},{key:"attachPinch",value:function(){this.hammer=new this.Hammer(this.pinchCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("pinchstart",this.boundOnPinchStart),this.hammer.on("pinch",this.boundOnPinch),this.hammer.on("pinchend",this.boundOnPinchEnd)}},{key:"detachPinch",value:function(){this.hammer&&(this.hammer.off("pinchstart",this.boundOnPinchStart),this.hammer.off("pinch",this.boundOnPinch),this.hammer.off("pinchend",this.boundOnPinchEnd),this.hammer.destroy(),this.hammer=null)}},{key:"attachPan",value:function(){this.hammer&&(this.hammer.on("panstart",this.boundOnPanStart),this.hammer.on("panmove",this.boundOnPan),this.hammer.on("panend",this.boundOnPanEnd),this.pinchCanvas.addEventListener("touchstart",this.boundOnTouchStart),this.pinchCanvas.addEventListener("touchend",this.boundOnTouchEnd))}},{key:"detachPan",value:function(){this.hammer&&(this.resetPan(),this.resetTranslation(),this.hammer.off("panstart",this.boundOnPanStart),this.hammer.off("panmove",this.boundOnPan),this.hammer.off("panend",this.boundOnPanEnd),this.pinchCanvas.removeEventListener("touchstart",this.boundOnTouchStart),this.pinchCanvas.removeEventListener("touchend",this.boundOnTouchEnd))}},{key:"updateZoom",value:function(){this.isPinchOngoing&&(this.applyTransform({scale:this.scalingFactor}),window.setTimeout(this.updateZoom.bind(this),15))}},{key:"zoomIn",value:function(){this.isZoomOngoing=!0,this.scalingFactor=2.3,this.pinchTarget.style.transition="".concat(this.transformProperty," ").concat(this.transitionDuration,"ms ease-out"),this.applyTransform({scale:this.scalingFactor}),window.setTimeout(this.boundOnZoomedIn,this.transitionDuration);var t=new CustomEvent(o.nb,{detail:{zoomIn:!0,transitionDuration:this.transitionDuration}});this.pinchTarget.dispatchEvent(t)}},{key:"zoomOut",value:function(){this.isZoomOngoing=!0,this.detachPan(),this.pinchTarget.style.transition="".concat(this.transformProperty," ").concat(this.transitionDuration,"ms ease-out"),this.scalingFactor=1,this.applyTransform({scale:1}),window.setTimeout(this.boundOnZoomedOut,this.transitionDuration);var t=new CustomEvent(o.nb,{detail:{zoomIn:!1,transitionDuration:this.transitionDuration}});this.pinchTarget.dispatchEvent(t)}},{key:"panBy",value:function(t){if(t.x||t.y){var n=this.pinchTarget.offsetWidth*this.scalingFactor,i=this.pinchTarget.offsetHeight*this.scalingFactor,e=(n-window.innerWidth)/2,o=(i-window.innerHeight)/2,a=e/this.scalingFactor,s=o/this.scalingFactor,r={x:this.translation.x+t.x,y:this.translation.y+t.y};Math.abs(r.x)>a&&(r.x=this.translation.x),Math.abs(r.y)>s&&(r.y=this.translation.y),r.x===this.translation.x&&r.y===this.translation.y||(this.translation=r,this.applyTransform({translation:r}))}}},{key:"applyTransform",value:function(t){var n=this,i=t.scale||this.scalingFactor,e=this.translation.x,o=this.translation.y;if(t.translation&&t.translation.x&&(e=t.translation.x),t.translation&&t.translation.y&&(o=t.translation.y),i>this.scaleMax&&(i=this.scaleMax),i<this.scaleMin&&(i=this.scaleMin),i<this.scaleMax){var a=(i-this.scaleMin)/(this.scaleMax-this.scaleMin);e*=a,o*=a}window.requestAnimationFrame((function(){n.pinchTarget.style[n.transformProperty]="scale(".concat(i,") translate3d(").concat(e,"px,").concat(o,"px,0)")}))}},{key:"resetTransition",value:function(){this.pinchTarget.style.transition=""}},{key:"resetTranslation",value:function(){this.translation={x:0,y:0}}},{key:"resetPan",value:function(){this.isPanning=!1,this.panStartPointerPosition={x:null,y:null},this.panStartTranslation={x:null,y:null}}},{key:"destroy",value:function(){this.detach()}}])&&h(n.prototype,e),s&&h(n,s),Object.defineProperty(n,"prototype",{writable:!1}),t}();function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function d(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,(o=e.key,a=void 0,a=function(t,n){if("object"!==u(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var e=i.call(t,n||"default");if("object"!==u(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(o,"string"),"symbol"===u(a)?a:String(a)),e)}var o,a}function m(){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,n,i){var e=f(t,n);if(e){var o=Object.getOwnPropertyDescriptor(e,n);return o.get?o.get.call(arguments.length<3?t:i):o.value}}).apply(this,arguments)}function f(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=b(t)););return t}function p(t,n){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t})(t,n)}function y(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,e=b(t);if(n){var o=b(this).constructor;i=Reflect.construct(e,arguments,o)}else i=e.apply(this,arguments);return g(this,i)}}function g(t,n){if(n&&("object"===u(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var w=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&p(t,n)}(h,t);var n,i,e,r=y(h);function h(){var t;l(this,h);for(var n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];return(t=r.call.apply(r,[this].concat(i))).el.dataset.settings||t.el.dataset.settings.id?(t.focusCatcher=t.el.querySelector("[data-zoom-focus]"),t.closeButton=t.el.querySelector("[data-zoom-close]"),t.backdrop=t.el.querySelector("[data-zoom-backdrop]"),t.background=t.el.querySelector("[data-zoom-background]"),t.isCaptionShown=!1,t.caption=t.el.querySelector("[data-zoom-caption]"),t.imageWrapper=t.el.querySelector("[data-zoom-image]"),t.image=t.el.querySelector('[data-image-el="img"]'),t.settings=JSON.parse(t.el.dataset.settings),t.id=t.settings.zoomId,t.hash="bild-".concat(t.settings.imageId),t.animationDuration=250,t.ignoreClicks=!1,t.pinchToZoom=new c(t.el,t.image),t.image.classList.remove("opacity-full"),t.image.classList.add("opacity-none"),t.boundRepositionCloseButton=function(){return t.repositionCloseButton()},t.boundCenterImage=function(){return t.centerImage()},t.boundHandleWheel=function(n){return t.handleWheel(n)},t.boundHandleClick=function(){return t.handleClick()},t.boundClose=function(){t.publish(o.G)},t.boundOnPinchZoomChanged=function(n){return t.onPinchZoomChanged(n)},t.pinchToZoom.init().catch((function(){t.pinchToZoom.destroy(),t.pinchToZoom=null})).finally((function(){s.a.instance.register(v(t)),window.location.hash==="#".concat(t.hash)&&t.publish(o.J,t.id)})),t):g(t)}return n=h,(i=[{key:"open",value:function(){var t=this;a.a.isPhone&&a.a.isIOS&&(window.addEventListener("resize",this.boundRepositionCloseButton),window.addEventListener("resize",this.boundCenterImage),this.centerImage()),a.a.isPhone||this.el.addEventListener("wheel",this.boundHandleWheel),this.background&&this.background.addEventListener("click",this.boundHandleClick),this.toggleZoomLayer(!0),this.publish(o.mb,this),this.settings.zoomAnimation&&this.settings.zoomId?(this.publish(o.S,this.settings.zoomId,this.animationDuration),window.setTimeout((function(){return t.showImageOnLazyload()}),this.animationDuration)):this.showImageOnLazyload(),this.showOverlay(),this.focusOverlay(),this.toggleInterface(!1),this.pinchToZoom&&(this.pinchToZoom.attach(),this.image.addEventListener(o.nb,this.boundOnPinchZoomChanged))}},{key:"close",value:function(){var t=this;window.removeEventListener("scroll",this.boundHandleScroll),window.removeEventListener("resize",this.boundRepositionCloseButton),window.removeEventListener("resize",this.boundCenterImage),this.background&&this.background.removeEventListener("click",this.boundHandleClick),this.hideOverlay(),this.hideImage(),this.toggleInterface(!0),this.publish(o.kb,this),window.setTimeout((function(){t.toggleZoomLayer(!1)}),this.animationDuration),this.pinchToZoom&&(this.image.removeEventListener(o.nb,this.boundOnPinchZoomChanged),this.pinchToZoom.detach())}},{key:"handleWheel",value:function(t){this.caption&&this.caption.contains(t.target)||(this.el.removeEventListener("wheel",this.boundHandleWheel),this.boundClose())}},{key:"handleClick",value:function(){this.ignoreClicks||this.toggleInterface(this.isCaptionShown)}},{key:"onPinchZoomChanged",value:function(t){var n=this;t.detail&&"boolean"==typeof t.detail.zoomIn&&(this.toggleInterface(t.detail.zoomIn),Number.isInteger(t.detail.transitionDuration)&&(this.ignoreClicks=!0,window.setTimeout((function(){n.ignoreClicks=!1}),t.detail.transitionDuration)))}},{key:"toggleInterface",value:function(t){t?(this.hideCaption(),this.hideCloseButton(),this.isCaptionShown=!1):(this.showCaption(),this.showCloseButton(),this.isCaptionShown=!0)}},{key:"toggleZoomLayer",value:function(t){this.el.classList.toggle("hidden",!t)}},{key:"repositionCloseButton",value:function(){var t=this;window.requestAnimationFrame((function(){if(t.buttonTargetDistance=t.buttonTargetDistance?t.buttonTargetDistance:Number(window.getComputedStyle(t.closeButton).top.split("px")[0]),window.innerHeight>window.innerWidth)t.closeButton.style.top="".concat(t.buttonTargetDistance,"px");else{var n=t.closeButton.getBoundingClientRect().top;n!==t.buttonTargetDistance&&(t.closeButton.style.top="".concat(2*t.buttonTargetDistance-n,"px"))}}))}},{key:"centerImage",value:function(){var t=this;window.requestAnimationFrame((function(){window.innerHeight>window.innerWidth?t.image.offsetHeight>0&&window.setTimeout((function(){var n=window.innerHeight-t.image.offsetHeight;t.imageWrapper.classList.add("absolute"),t.imageWrapper.style.top="".concat(n/2,"px")}),t.animationDuration):(t.imageWrapper.classList.remove("absolute"),t.imageWrapper.style.top="")}))}},{key:"showOverlay",value:function(){var t=this;this.backdrop.setAttribute("style","transition: background-color ".concat(this.animationDuration,"ms ease-out;")),window.setTimeout((function(){t.backdrop.classList.remove("bg-opacity-none")}),0)}},{key:"focusOverlay",value:function(){this.focusCatcher.focus()}},{key:"hideOverlay",value:function(){this.backdrop.classList.add("bg-opacity-none")}},{key:"showCaption",value:function(){var t=this;this.caption&&(this.caption.style.transform="translateY(100%)",window.setTimeout((function(){t.caption.setAttribute("style","transition: transform ".concat(t.animationDuration,"ms ease-out;")),t.caption.style.transform="translateY(0)"}),0))}},{key:"hideCaption",value:function(){this.caption&&(this.caption.style.transform="translateY(100%)")}},{key:"showCloseButton",value:function(){var t=this;this.closeButton.addEventListener("click",this.boundClose),this.closeButton.style.transform="translateX(150%)",window.setTimeout((function(){t.closeButton.setAttribute("style","transition: transform ".concat(t.animationDuration,"ms ease-out;")),t.closeButton.style.transform="translateX(0)",t.repositionCloseButton()}),0)}},{key:"hideCloseButton",value:function(){this.closeButton.removeEventListener("click",this.boundClose),this.closeButton.style.transform="translateX(150%)"}},{key:"showImage",value:function(){var t=this;this.image.classList.remove("opacity-full"),this.image.classList.add("opacity-none"),window.setTimeout((function(){t.image.setAttribute("style","transition: opacity ".concat(t.animationDuration,"ms ease-out;")),t.image.classList.remove("opacity-none"),t.image.classList.add("opacity-full")}),0),this.image.removeEventListener("load",this.boundShowImage)}},{key:"hideImage",value:function(){this.image.classList.remove("opacity-full"),this.image.classList.add("opacity-none")}},{key:"showImageOnLazyload",value:function(){var t=this;this.image.classList.contains("lazyloaded")||this.image.classList.contains("ls-is-cached")||this.image.complete?this.showImage():(this.boundShowImage=function(){return t.showImage()},this.image.addEventListener("load",this.boundShowImage))}},{key:"preventScrolling",get:function(){return!0}},{key:"destroy",value:function(){this.hideZoomLayer(),this.image.removeEventListener("load",this.boundShowImage),this.image.removeEventListener(o.nb,this.boundOnPinchZoomChanged),m(b(h.prototype),"destroy",this).call(this)}}])&&d(n.prototype,i),e&&d(n,e),Object.defineProperty(n,"prototype",{writable:!1}),h}(e.Component)}}]);