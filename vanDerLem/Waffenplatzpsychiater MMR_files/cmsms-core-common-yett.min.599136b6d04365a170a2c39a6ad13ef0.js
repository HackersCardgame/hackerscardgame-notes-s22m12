!function(k,g){"object"==typeof exports&&"undefined"!=typeof module?g(exports):"function"==typeof define&&define.amd?define(["exports"],g):g((k=k||self).yett={})}(this,function(k){function g(e,a){return e&&(!a||a!==h)&&(!c.blacklist||c.blacklist.some(function(b){return b.test(e)}))&&(!c.whitelist||c.whitelist.every(function(b){return!b.test(e)}))}function p(e){var a=e.getAttribute("src");return c.blacklist&&c.blacklist.every(function(b){return!b.test(a)})||c.whitelist&&c.whitelist.some(function(b){return b.test(a)})}
function m(e){if(!(e=function(a){if(Array.isArray(a)){for(var b=0,d=Array(a.length);b<a.length;b++)d[b]=a[b];return d}}(e)||function(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}(e)))throw new TypeError("Invalid attempt to spread non-iterable instance");return e}var h="javascript/blocked",c={blacklist:window.YETT_BLACKLIST,whitelist:window.YETT_WHITELIST},l=[],q=new MutationObserver(function(e){for(var a=0;a<e.length;a++)for(var b=
e[a].addedNodes,d=function(a){var f=b[a];1===f.nodeType&&"SCRIPT"===f.tagName&&g(f.src,f.type)&&(l.push(f.cloneNode()),f.type=h,f.addEventListener("beforescriptexecute",function t(a){f.getAttribute("type")===h&&a.preventDefault();f.removeEventListener("beforescriptexecute",t)}),f.parentElement&&f.parentElement.removeChild(f))},c=0;c<b.length;c++)d(c)});q.observe(document.documentElement,{childList:!0,subtree:!0});var r=document.createElement;document.createElement=function(){for(var c=arguments.length,
a=Array(c),b=0;b<c;b++)a[b]=arguments[b];if("script"!==a[0].toLowerCase())return r.bind(document).apply(void 0,a);var d=r.bind(document).apply(void 0,a),n=d.setAttribute.bind(d);try{Object.defineProperties(d,{src:{get:function(){return d.getAttribute("src")},set:function(a){return g(a,d.type)&&n("type",h),n("src",a),!0}},type:{set:function(a){a=g(d.src,d.type)?h:a;return n("type",a),!0}}}),d.setAttribute=function(a,b){"type"===a||"src"===a?d[a]=b:HTMLScriptElement.prototype.setAttribute.call(d,a,
b)}}catch(v){console.warn("Yett: unable to prevent script execution for script src ",d.src,".\n",'A likely cause would be because you are using a third-party browser extension that monkey patches the "document.createElement" function.')}return d};var u=/[|\{}()[\]^$+*?.]/g;k.unblock=function(){for(var e=arguments.length,a=Array(e),b=0;b<e;b++)a[b]=arguments[b];1>a.length?(c.blacklist=[],c.whitelist=[]):(c.blacklist&&(c.blacklist=c.blacklist.filter(function(b){return a.every(function(a){return"string"==
typeof a?!b.test(a):a instanceof RegExp?b.toString()!==a.toString():void 0})})),c.whitelist&&(c.whitelist=[].concat(m(c.whitelist),m(a.map(function(a){if("string"==typeof a){var b=".*"+a.replace(u,"\\$\x26")+".*";if(c.whitelist.every(function(a){return a.toString()!==b.toString()}))return new RegExp(b)}else if(a instanceof RegExp&&c.whitelist.every(function(b){return b.toString()!==a.toString()}))return a;return null}).filter(Boolean)))));e=document.querySelectorAll('script[type\x3d"'.concat(h,'"]'));
for(b=0;b<e.length;b++){var d=e[b];p(d)&&(d.type="application/javascript",l.push(d),d.parentElement.removeChild(d))}var g=0;m(l).forEach(function(a,b){if(p(a)){var c=document.createElement("script");c.setAttribute("src",a.src);c.setAttribute("type","application/javascript");document.head.appendChild(c);l.splice(b-g,1);g++}});c.blacklist&&1>c.blacklist.length&&q.disconnect()};Object.defineProperty(k,"__esModule",{value:!0})});